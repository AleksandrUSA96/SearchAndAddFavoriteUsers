(this.webpackJsonpjustai=this.webpackJsonpjustai||[]).push([[0],{101:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(12),c=r.n(i),s=(r(73),r(74),r(2)),o=function(e){var t=e.children;return Object(s.jsx)("div",{children:t})},u=r(55),l=r(26),d=r.n(l),f=r(32),g=r(14),j=r(56).create({baseURL:"https://randomuser.me/api/?nat=us&results=5000&seed=foobar&inc=name,email,login,picture,registered"}),b=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get();case 2:return t=e.sent,e.abrupt("return",t.data.results);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=r(122),h=r(123),x=r(125),O=r(131),m=r(130),v=r(129),y=function(e){var t=e.searchUsersHandler;return Object(s.jsxs)(O.a,{fullWidth:!0,children:[Object(s.jsx)(m.a,{htmlFor:"search",children:"\u041d\u0430\u0439\u0442\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"}),Object(s.jsx)(v.a,{id:"search",onChange:function(e){return t(e.target.value)}})]})},S=r(60),C=a.a.createContext(),D=r(132),w=r(19),U=r.n(w),I=r(124),H=Object(I.a)((function(){return{flexDirection:{flexDirection:"column"},favoriteUserItem:{cursor:"pointer",display:"flex",direction:"row",alignItems:"center"}}})),L=function(e){var t=e.user,r=e.onDragStartItemHandler,n=e.onDropSwapUsersInState,a=H();return Object(s.jsxs)(x.a,{className:[U.a.item,a.favoriteUserItem],draggable:!0,my:1,p:1,border:1,borderColor:"grey.200",onDragStart:function(e){return r(t)},onDrop:function(e){return n(e,t)},children:[Object(s.jsx)(x.a,{mr:1,children:Object(s.jsx)(D.a,{src:t.picture.thumbnail})}),Object(s.jsxs)("div",{children:[Object(s.jsxs)(x.a,{align:"left",fontSize:14,children:[t.name.title," ",t.name.first," ",t.name.last,", \u0434\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438: ",t.registered.date.slice(0,10)," "]}),Object(s.jsxs)(x.a,{align:"left",fontSize:14,children:["Email: ",t.email]})]})]})},k=function(e,t){switch(t.type){case"addUser":return[].concat(Object(S.a)(e),[t.payload]);case"changeUser":return t.payload;default:return e}},E=function(e){var t=e.favoriteUser,r=H(),a=Object(n.useContext)(C).dragDropHandler,i=Object(n.useState)(),c=Object(g.a)(i,2),o=c[0],u=c[1],l=Object(n.useReducer)(k,[]),d=Object(g.a)(l,2),f=d[0],j=d[1],b=function(e){u(e)},p=function(e){var t=e.target.closest("."+U.a.item);e.target.classList.contains(U.a.item)&&(e.target.style.backgroundColor="#ffffff"),t&&(t.style.backgroundColor="#ffffff")},h=function(e,t){if(o){var r=f.indexOf(o),n=f.indexOf(t);f.splice(n,1,o),f.splice(r,1,t),j({type:"changeUser",payload:f}),p(e),u(null)}},O=function(e){e.preventDefault(),function(e){var t=e.target.closest("."+U.a.item);e.target.classList.contains(U.a.item)&&(e.target.style.backgroundColor="#eeeeee"),t&&(t.style.backgroundColor="#eeeeee")}(e)};return Object(s.jsxs)(x.a,{width:"50%",children:[Object(s.jsx)(x.a,{display:"flex",alignItems:"center",border:1,borderColor:"grey.200",px:2,py:1.4,fontFamily:"Roboto, Helvetica, Arial, sans-serif",lineHeight:1.75,children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"}),Object(s.jsx)(x.a,{id:"favoriteList",className:r.flexDirection,display:"flex",border:1,borderColor:"grey.200",p:1,onDragOver:function(e){return O(e)},onDragEnd:function(e){return function(e){e.target.style.backgroundColor="#ffffff"}(e)},onDragLeave:function(e){return function(e){p(e)}(e)},onDrop:function(e){return function(e,t){null!==t&&(a(e,t),j({type:"addUser",payload:t.user}),p(e),document.getElementById("favoriteList").style.boxShadow="none")}(e,t)},children:0!==f.length?f.map((function(e){return Object(s.jsx)(L,{user:e,onDragStartItemHandler:b,onDropSwapUsersInState:h},e.login.uuid)})):"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u0447\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0435"})]})},F=function(e){var t=e.matchSubString,r=e.str;if(!t)return r;var n=new RegExp(t,"ig"),a=r.match(n);return a?(console.log("matchValue",a),console.log("str.split(regexp)",r.split(n)),r.split(n).map((function(e,t,r){if(t<r.length-1){var n=a.shift();return Object(s.jsxs)(s.Fragment,{children:[e,Object(s.jsx)("span",{style:{fontWeight:"bold"},children:n})]})}return e}))):r},G=function(e){var t=e.user,r=e.id,a=e.idGroup,i=e.matchSubString,c=Object(n.useContext)(C),o=c.dragStartHandler,u=c.dragEndHandler,l=c.dragOverHandler,d=Object(n.useCallback)((function(e){return Object(s.jsx)(F,{matchSubString:i,str:e})}),[i]),f=H();return Object(s.jsxs)(x.a,{draggable:!0,className:f.favoriteUserItem,border:1,borderColor:"grey.200",borderRadius:5,my:1,p:1,onDragStart:function(e){return o(e,{user:t,id:r,idGroup:a})},onDragOver:function(e){return l(e)},onDragEnd:function(e){return u(e)},children:[Object(s.jsx)(x.a,{mr:1,children:Object(s.jsx)(D.a,{src:t.picture.thumbnail})}),Object(s.jsxs)("div",{children:[Object(s.jsxs)(x.a,{align:"left",fontSize:14,children:[t.name.title," ",d(t.name.first)," ",d(t.name.last),", \u0434\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438: ",t.registered.date.slice(0,10)," "]}),Object(s.jsxs)(x.a,{align:"left",fontSize:14,children:["Email: ",t.email]})]})]})},P=r(127),_=r(120),N=r(133),R=r(121),z=function(e){var t=e.groupObject,r=e.matchSubString,n=H();return Object(s.jsxs)(P.a,{TransitionProps:{unmountOnExit:!0},children:[Object(s.jsx)(_.a,{variant:"subtitle1",color:"textPrimary",children:Object(s.jsxs)(N.a,{disabled:!t.group.length&&"disabled",children:["\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438: ",t.id.slice(0,4),".",t.id.slice(5,7)]})}),Object(s.jsx)(R.a,{className:n.flexDirection,children:t.group.map((function(e){return Object(s.jsx)(G,{user:e,id:e.login.uuid,idGroup:t.id,matchSubString:r},e.login.uuid)}))})]})},B=function(e){var t=e.usersGroup,r=e.matchSubString;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(x.a,{width:"50%",children:t.map((function(e,t){return Object(s.jsx)(z,{groupObject:e,matchSubString:r},t)}))})})},T=r(128),M=null,W=[],A=function(){var e=10,t=Object(n.useState)([]),r=Object(g.a)(t,2),a=r[0],i=r[1],c=Object(n.useState)(),o=Object(g.a)(c,2),l=o[0],j=o[1],O=Object(n.useState)(1),m=Object(g.a)(O,2),v=m[0],S=m[1],D=Object(n.useState)(),w=Object(g.a)(D,2),U=w[0],I=w[1],H=Object(n.useState)(),L=Object(g.a)(H,2),k=L[0],F=L[1],G=function(){var t=Object(f.a)(d.a.mark((function t(){var r,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b();case 2:return r=t.sent,t.next=5,P(r);case 5:return n=t.sent,t.next=8,n;case 8:return M=t.sent,t.next=11,I(Math.ceil(n.length/e));case 11:return t.next=13,i(n.slice((v-1)*e,v*e));case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),P=function(e){var t=e;t.sort((function(e,t){return e.registered.date.slice(0,10)>t.registered.date.slice(0,10)?1:-1}));var r,n=[];return t.reduce((function(e,t){var n=t.registered.date.slice(0,7);r!==n?(r=n,e.push({id:n,group:[t]})):e.find((function(e){return e.id===n})).group.push(t);return e}),n),n};Object(n.useEffect)((function(){G()}),[]);return Object(s.jsx)(C.Provider,{value:{favoriteUser:l,dragStartHandler:function(e,t){j(t);var r=document.getElementById("favoriteList");e.target.style.transition="all .3s ease-in-out",e.target.style.backgroundColor="#eeeeee",e.target.style.opacity=.5,r.style.transition="all .3s ease-in-out",r.style.boxShadow="inset rgb(63 81 181) 0px 0px 10px 0px"},dragOverHandler:function(e){e.preventDefault()},dragDropHandler:function(e,t){e.preventDefault();var r=a.find((function(e){return e.id===t.idGroup})),n=r.group.indexOf(t.user);-1!==n&&(r.group.splice(n,1),i(a),j(null))},dragEndHandler:function(e){j(null),e.target.style.backgroundColor="#ffffff",e.target.style.opacity=1},dragStartFavoriteUserHandel:function(e,t){j(t)}},children:Object(s.jsxs)(s.Fragment,{children:[0===a.length?Object(s.jsx)(p.a,{}):null,Object(s.jsxs)(h.a,{maxWidth:"md",spacing:3,children:[Object(s.jsx)(y,{searchUsersHandler:function(t){var r,n=[],a=Object(u.a)(M);try{for(a.s();!(r=a.n()).done;){var c=r.value;n.push(function(e){var r=e.group.filter((function(e){return e.name.first.toLowerCase().includes(t.toLowerCase())||e.name.last.toLowerCase().includes(t.toLowerCase())}));return{id:e.id,group:r}}(c))}}catch(s){a.e(s)}finally{a.f()}W=[].concat(n),F(t),I(Math.ceil(W.length/e)),i(W.slice((v-1)*e,v*e))}}),Object(s.jsxs)(x.a,{display:"flex",children:[Object(s.jsx)(B,{usersGroup:a,matchSubString:k}),Object(s.jsx)(E,{width:"50%",favoriteUser:l})]}),Object(s.jsx)(T.a,{count:U,page:v,defaultPage:1,onChange:function(t,r){S(r),console.log(W.length),0===W.length?i(M.slice((r-1)*e,r*e)):i(W.slice((r-1)*e,r*e))},color:"primary",style:{marginTop:"20px"}})]})]})})};var J=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(o,{children:Object(s.jsx)(A,{})})})},V=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,135)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),i(e),c(e)}))};c.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(J,{})}),document.getElementById("root")),V()},19:function(e,t,r){e.exports={item:"FavoriteUserItem_item__3aGS2",uprise:"FavoriteUserItem_uprise__1o0II"}},73:function(e,t,r){},74:function(e,t,r){}},[[101,1,2]]]);
//# sourceMappingURL=main.ddfe9e4c.chunk.js.map